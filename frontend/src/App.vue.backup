<template>
  <n-config-provider :theme="isDark ? darkTheme : null" :theme-overrides="themeOverrides">
    <n-layout style="height: 100vh;">
      <!-- Top Bar -->
      <n-layout-header bordered style="height: 64px; padding: 0 24px; display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <n-icon size="32" color="#18a058">
            <ServerIcon />
          </n-icon>
          <span style="font-size: 20px; font-weight: 600;">OpenAI Router</span>
        </div>

        <div style="display: flex; align-items: center; gap: 16px;">
          <n-button quaternary circle @click="toggleTheme">
            <template #icon>
              <n-icon>
                <MoonIcon v-if="isDark" />
                <SunnyIcon v-else />
              </n-icon>
            </template>
          </n-button>

          <n-button type="primary" @click="showAddModal = true">
            <template #icon>
              <n-icon><AddIcon /></n-icon>
            </template>
            Ê∑ªÂä†Ë∑ØÁî±
          </n-button>
        </div>
      </n-layout-header>

      <!-- Main Content -->
      <n-layout-content style="padding: 24px; overflow: auto;">
        <!-- Stats Cards -->
        <n-grid :cols="4" :x-gap="16" :y-gap="16" style="margin-bottom: 24px;">
          <n-grid-item>
            <n-card :bordered="false" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <n-statistic label="Ë∑ØÁî±ÊÄªÊï∞" :value="stats.route_count">
                <template #prefix>
                  <n-icon size="24" color="#fff">
                    <GitNetworkIcon />
                  </n-icon>
                </template>
              </n-statistic>
            </n-card>
          </n-grid-item>

          <n-grid-item>
            <n-card :bordered="false" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <n-statistic label="Ê®°ÂûãÊÄªÊï∞" :value="stats.model_count">
                <template #prefix>
                  <n-icon size="24" color="#fff">
                    <CubeIcon />
                  </n-icon>
                </template>
              </n-statistic>
            </n-card>
          </n-grid-item>

          <n-grid-item>
            <n-card :bordered="false" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
              <n-statistic label="ËØ∑Ê±ÇÊÄªÊï∞" :value="stats.total_requests">
                <template #prefix>
                  <n-icon size="24" color="#fff">
                    <StatsChartIcon />
                  </n-icon>
                </template>
              </n-statistic>
            </n-card>
          </n-grid-item>

          <n-grid-item>
            <n-card :bordered="false" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
              <n-statistic label="Token ‰ΩøÁî®" :value="formatNumber(stats.total_tokens)">
                <template #prefix>
                  <n-icon size="24" color="#fff">
                    <FlashIcon />
                  </n-icon>
                </template>
              </n-statistic>
            </n-card>
          </n-grid-item>
        </n-grid>

        <!-- Redirect Config -->
        <n-card title="üîÄ ‰ª£ÁêÜÈáçÂÆöÂêëÈÖçÁΩÆ" style="margin-bottom: 24px;" :bordered="false">
          <n-space vertical>
            <n-space align="center">
              <span>ÂêØÁî®ÈáçÂÆöÂêë:</span>
              <n-switch v-model:value="redirectConfig.enabled" @update:value="saveRedirectConfig" />
            </n-space>

            <n-space align="center" v-if="redirectConfig.enabled">
              <n-tag type="info" size="large" style="font-family: monospace;">
                {{ redirectConfig.keyword }}
              </n-tag>
              <n-icon size="20"><ArrowForwardIcon /></n-icon>
              <n-tag type="success" size="large" style="font-family: monospace;">
                {{ redirectConfig.targetModel || 'Êú™ÈÖçÁΩÆ' }}
              </n-tag>
              <n-tag v-if="redirectConfig.targetName" type="warning" size="large">
                ({{ redirectConfig.targetName }})
              </n-tag>
            </n-space>

            <n-space align="center" v-if="redirectConfig.enabled">
              <n-select
                v-model:value="redirectConfig.targetModel"
                :options="modelOptions"
                placeholder="ÈÄâÊã©ÁõÆÊ†áÊ®°Âûã"
                style="width: 300px;"
                filterable
                @update:value="saveRedirectConfig"
              />
            </n-space>
          </n-space>
        </n-card>

        <!-- API Config -->
        <n-card title="üîë Êú¨Âú∞ API ÈÖçÁΩÆ" style="margin-bottom: 24px;" :bordered="false">
          <n-space vertical>
            <n-space align="center">
              <span style="min-width: 100px;">API Âú∞ÂùÄ:</span>
              <n-input
                :value="config.localApiEndpoint"
                readonly
                style="flex: 1; max-width: 500px;"
              >
                <template #suffix>
                  <n-button text @click="copyToClipboard(config.localApiEndpoint)">
                    <template #icon>
                      <n-icon><CopyIcon /></n-icon>
                    </template>
                  </n-button>
                </template>
              </n-input>
            </n-space>

            <n-space align="center">
              <span style="min-width: 100px;">API Key:</span>
              <n-input
                :value="maskApiKey(config.localApiKey)"
                readonly
                style="flex: 1; max-width: 500px;"
              >
                <template #suffix>
                  <n-button text @click="copyToClipboard(config.localApiKey)">
                    <template #icon>
                      <n-icon><CopyIcon /></n-icon>
                    </template>
                  </n-button>
                </template>
              </n-input>
            </n-space>
          </n-space>
        </n-card>

        <!-- Routes Table -->
        <n-card title="üìã Ê®°ÂûãË∑ØÁî±ÂàóË°®" :bordered="false">
          <template #header-extra>
            <n-button @click="loadRoutes" quaternary circle>
              <template #icon>
                <n-icon><RefreshIcon /></n-icon>
              </template>
            </n-button>
          </template>

          <n-data-table
            :columns="columns"
            :data="routes"
            :pagination="pagination"
            :bordered="false"
            :single-line="false"
            size="small"
            striped
          />
        </n-card>
      </n-layout-content>
    </n-layout>

    <!-- Add/Edit Modal -->
    <n-modal
      v-model:show="showAddModal"
      preset="card"
      :title="editingRoute ? 'ÁºñËæëË∑ØÁî±' : 'Ê∑ªÂä†Ë∑ØÁî±'"
      style="width: 600px;"
      :mask-closable="false"
    >
      <n-form
        ref="formRef"
        :model="formModel"
        :rules="formRules"
        label-placement="left"
        label-width="100px"
      >
        <n-form-item label="Ë∑ØÁî±ÂêçÁß∞" path="name">
          <n-input v-model:value="formModel.name" placeholder="‰æãÂ¶Ç: OpenAI Official" />
        </n-form-item>

        <n-form-item label="Ê®°Âûã ID" path="model">
          <n-space style="width: 100%;">
            <n-input
              v-model:value="formModel.model"
              placeholder="‰æãÂ¶Ç: gpt-4"
              style="flex: 1;"
            />
            <n-button @click="fetchModels" :loading="fetchingModels">
              Ëé∑ÂèñÊ®°Âûã
            </n-button>
          </n-space>
        </n-form-item>

        <n-form-item label="API URL" path="apiUrl">
          <n-input
            v-model:value="formModel.apiUrl"
            placeholder="https://api.openai.com/v1"
            @blur="cleanApiUrl"
          />
          <template #feedback>
            <span style="color: #888; font-size: 12px;">üí° ÊèêÁ§∫ÔºöAPI URL ‰∏ÄËà¨‰∏çË¶ÅÂú®Êú´Â∞æÂä†ÊñúÊù† (/)</span>
          </template>
        </n-form-item>

        <n-form-item label="API Key" path="apiKey">
          <n-input v-model:value="formModel.apiKey" type="password" placeholder="ÁïôÁ©∫ÂàôÈÄè‰º†ÂéüÂßãËØ∑Ê±ÇÁöÑ Key" show-password-on="click" />
        </n-form-item>

        <n-form-item label="ÂàÜÁªÑ" path="group">
          <n-input v-model:value="formModel.group" placeholder="‰æãÂ¶Ç: production" />
        </n-form-item>
      </n-form>

      <template #footer>
        <n-space justify="end">
          <n-button @click="showAddModal = false">ÂèñÊ∂à</n-button>
          <n-button type="primary" @click="handleSubmit" :loading="submitting">
            {{ editingRoute ? 'Êõ¥Êñ∞' : 'Ê∑ªÂä†' }}
          </n-button>
        </n-space>
      </template>
    </n-modal>

    <!-- Model Select Modal -->
    <n-modal
      v-model:show="showModelSelectModal"
      preset="card"
      title="üéØ ÈÄâÊã©Ê®°Âûã"
      style="width: 800px; max-height: 600px;"
    >
      <n-input
        v-model:value="modelSearchKeyword"
        placeholder="üîç ÊêúÁ¥¢Ê®°ÂûãÂêçÁß∞..."
        clearable
        style="margin-bottom: 16px;"
      />
      <n-scrollbar style="max-height: 450px;">
        <n-grid :x-gap="12" :y-gap="12" :cols="2">
          <n-grid-item
            v-for="model in filteredModels"
            :key="model"
          >
            <n-card
              :title="model"
              hoverable
              @click="selectModel(model)"
              style="cursor: pointer; transition: all 0.3s;"
              :class="{'selected-model-card': formModel.model === model}"
            >
              <template #header>
                <n-ellipsis style="max-width: 100%;" :tooltip="{ width: 300 }">
                  <n-text strong>{{ model }}</n-text>
                </n-ellipsis>
              </template>
              <n-space vertical size="small">
                <n-tag :type="getModelTagType(model)" size="small">
                  {{ getModelProvider(model) }}
                </n-tag>
                <n-text depth="3" style="font-size: 12px;">
                  ÁÇπÂáªÈÄâÊã©Ê≠§Ê®°Âûã
                </n-text>
              </n-space>
            </n-card>
          </n-grid-item>
        </n-grid>
        <n-empty
          v-if="filteredModels.length === 0"
          description="Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÊ®°Âûã"
          style="margin: 60px 0;"
        />
      </n-scrollbar>
      <template #footer>
        <n-space justify="space-between" align="center">
          <n-text depth="3">ÂÖ± {{ fetchedModels.length }} ‰∏™Ê®°Âûã</n-text>
          <n-button @click="showModelSelectModal = false">ÂÖ≥Èó≠</n-button>
        </n-space>
      </template>
    </n-modal>
  </n-config-provider>
</template>

<script setup>
import { ref, h, onMounted, computed } from 'vue'
import { darkTheme, NButton, NIcon, NTag, NSpace } from 'naive-ui'
import {
  ServerOutline as ServerIcon,
  Moon as MoonIcon,
  Sunny as SunnyIcon,
  Add as AddIcon,
  GitNetwork as GitNetworkIcon,
  Cube as CubeIcon,
  StatsChart as StatsChartIcon,
  Flash as FlashIcon,
  ArrowForward as ArrowForwardIcon,
  Copy as CopyIcon,
  Refresh as RefreshIcon,
  CreateOutline as EditIcon,
  TrashOutline as DeleteIcon,
} from '@vicons/ionicons5'

// ‰ΩøÁî®ÂÖ®Â±Ä APIÔºà‰∏çÈúÄË¶Å providerÔºâ
const showMessage = (type, content) => {
  if (window.$message) {
    window.$message[type](content)
  } else {
    console.log(`[${type}] ${content}`)
  }
}

// Theme
const isDark = ref(true)
const themeOverrides = {
  common: {
    primaryColor: '#18A058',
  },
}

const toggleTheme = () => {
  isDark.value = !isDark.value
  showMessage("info", isDark.value ? 'Â∑≤ÂàáÊç¢Âà∞ÊöóÈªëÊ®°Âºè' : 'Â∑≤ÂàáÊç¢Âà∞Êòé‰∫ÆÊ®°Âºè')
}

// Stats
const stats = ref({
  route_count: 0,
  model_count: 0,
  total_requests: 0,
  total_tokens: 0,
  success_rate: 0,
})

// Config
const config = ref({
  localApiKey: '',
  localApiEndpoint: '',
})

// Redirect Config
const redirectConfig = ref({
  enabled: false,
  keyword: 'proxy_auto',
  targetModel: '',
  targetName: '',
})

// Routes
const routes = ref([])
const showAddModal = ref(false)
const editingRoute = ref(null)
const submitting = ref(false)

// Form
const formRef = ref(null)
const formModel = ref({
  name: '',
  model: '',
  apiUrl: '',
  apiKey: '',
  group: '',
})

const formRules = {
  name: { required: true, message: 'ËØ∑ËæìÂÖ•Ë∑ØÁî±ÂêçÁß∞' },
  model: { required: true, message: 'ËØ∑ËæìÂÖ•Ê®°Âûã ID' },
  apiUrl: { required: true, message: 'ËØ∑ËæìÂÖ• API URL' },
}

// Model Fetch
const fetchingModels = ref(false)
const showModelSelectModal = ref(false)
const fetchedModels = ref([])
const modelSearchKeyword = ref('')

// Computed: filtered models based on search
const filteredModels = computed(() => {
  if (!modelSearchKeyword.value) {
    return fetchedModels.value
  }
  const keyword = modelSearchKeyword.value.toLowerCase()
  return fetchedModels.value.filter(model =>
    model.toLowerCase().includes(keyword)
  )
})

// Pagination
const pagination = {
  pageSize: 10,
}

// Table columns
const columns = [
  {
    title: 'ID',
    key: 'id',
    width: 60,
  },
  {
    title: 'ÂêçÁß∞',
    key: 'name',
    width: 150,
  },
  {
    title: 'Ê®°Âûã',
    key: 'model',
    width: 180,
    render(row) {
      return h(NTag, { type: 'info' }, { default: () => row.model })
    },
  },
  {
    title: 'API URL',
    key: 'api_url',
    ellipsis: {
      tooltip: true,
    },
  },
  {
    title: 'API Key',
    key: 'api_key',
    width: 150,
    render(row) {
      return maskApiKey(row.api_key)
    },
  },
  {
    title: 'ÂàÜÁªÑ',
    key: 'group',
    width: 100,
    render(row) {
      return row.group ? h(NTag, { type: 'success', size: 'small' }, { default: () => row.group }) : '-'
    },
  },
  {
    title: 'Êìç‰Ωú',
    key: 'actions',
    width: 150,
    render(row) {
      return h(NSpace, {}, {
        default: () => [
          h(
            NButton,
            {
              size: 'small',
              onClick: () => handleEdit(row),
            },
            { default: () => 'ÁºñËæë', icon: () => h(NIcon, {}, { default: () => h(EditIcon) }) }
          ),
          h(
            NButton,
            {
              size: 'small',
              type: 'error',
              onClick: () => handleDelete(row),
            },
            { default: () => 'Âà†Èô§', icon: () => h(NIcon, {}, { default: () => h(DeleteIcon) }) }
          ),
        ]
      })
    },
  },
]

// Computed
const modelOptions = computed(() => {
  const models = routes.value.map(r => r.model)
  const uniqueModels = [...new Set(models)]
  return uniqueModels.map(m => ({ label: m, value: m }))
})

// Methods
const loadRoutes = async () => {
  try {
    if (!window.go || !window.go.main || !window.go.main.App) {
      console.error('Wails runtime not available')
      return
    }
    const data = await window.go.main.App.GetRoutes()
    routes.value = data || []
    console.log('Routes loaded:', routes.value.length)
  } catch (error) {
    console.error('Failed to load routes:', error)
    showMessage("error", 'Âä†ËΩΩË∑ØÁî±Â§±Ë¥•: ' + error)
  }
}

const loadStats = async () => {
  try {
    if (!window.go || !window.go.main || !window.go.main.App) {
      console.error('Wails runtime not available')
      return
    }
    const data = await window.go.main.App.GetStats()
    stats.value = data || stats.value
    console.log('Stats loaded:', stats.value)
  } catch (error) {
    console.error('Âä†ËΩΩÁªüËÆ°Â§±Ë¥•:', error)
  }
}

const loadConfig = async () => {
  try {
    if (!window.go || !window.go.main || !window.go.main.App) {
      console.error('Wails runtime not available')
      return
    }
    const data = await window.go.main.App.GetConfig()
    config.value = data || config.value
    redirectConfig.value.enabled = data.redirectEnabled || false
    redirectConfig.value.keyword = data.redirectKeyword || 'proxy_auto'
    redirectConfig.value.targetModel = data.redirectTargetModel || ''
    redirectConfig.value.targetName = data.redirectTargetName || ''
    console.log('Config loaded:', config.value)
  } catch (error) {
    console.error('Âä†ËΩΩÈÖçÁΩÆÂ§±Ë¥•:', error)
  }
}

const saveRedirectConfig = async () => {
  if (!window.go || !window.go.main || !window.go.main.App) {
    showMessage("error", 'Wails ËøêË°åÊó∂Êú™Â∞±Áª™')
    return
  }
  try {
    await window.go.main.App.UpdateConfig(
      redirectConfig.value.enabled,
      redirectConfig.value.keyword,
      redirectConfig.value.targetModel
    )
    showMessage("success", 'ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò')
  } catch (error) {
    showMessage("error", '‰øùÂ≠òÈÖçÁΩÆÂ§±Ë¥•: ' + error)
  }
}

// Ê∏ÖÁêÜ API URLÔºåÁßªÈô§Êú´Â∞æÊñúÊù†
const cleanApiUrl = () => {
  if (formModel.value.apiUrl) {
    const cleaned = formModel.value.apiUrl.trim().replace(/\/+$/, '')
    if (cleaned !== formModel.value.apiUrl) {
      formModel.value.apiUrl = cleaned
      showMessage("info", 'API URL Â∑≤Ëá™Âä®ÁßªÈô§Êú´Â∞æÊñúÊù†')
    }
  }
}

const handleSubmit = async () => {
  if (!window.go || !window.go.main || !window.go.main.App) {
    showMessage("error", 'Wails ËøêË°åÊó∂Êú™Â∞±Áª™')
    return
  }
  try {
    await formRef.value?.validate()
    submitting.value = true

    // Ê∏ÖÁêÜ API URLÔºàÁßªÈô§Êú´Â∞æÊñúÊù†Ôºâ
    const cleanedApiUrl = formModel.value.apiUrl.trim().replace(/\/+$/, '')

    if (editingRoute.value) {
      await window.go.main.App.UpdateRoute(
        editingRoute.value.id,
        formModel.value.name,
        formModel.value.model,
        cleanedApiUrl,
        formModel.value.apiKey,
        formModel.value.group
      )
      showMessage("success", 'Ë∑ØÁî±Â∑≤Êõ¥Êñ∞')
    } else {
      await window.go.main.App.AddRoute(
        formModel.value.name,
        formModel.value.model,
        cleanedApiUrl,
        formModel.value.apiKey,
        formModel.value.group
      )
      showMessage("success", 'Ë∑ØÁî±Â∑≤Ê∑ªÂä†')
    }

    showAddModal.value = false
    loadRoutes()
    loadStats()
  } catch (error) {
    if (error.errors) {
      // Ë°®ÂçïÈ™åËØÅÈîôËØØ
      return
    }
    showMessage("error", 'Êìç‰ΩúÂ§±Ë¥•: ' + error)
  } finally {
    submitting.value = false
  }
}

const handleEdit = (row) => {
  editingRoute.value = row
  formModel.value = {
    name: row.name,
    model: row.model,
    apiUrl: row.api_url,
    apiKey: row.api_key,
    group: row.group,
  }
  showAddModal.value = true
}

const handleDelete = async (row) => {
  if (!window.go || !window.go.main || !window.go.main.App) {
    showMessage("error", 'Wails ËøêË°åÊó∂Êú™Â∞±Áª™')
    return
  }
  try {
    await window.go.main.App.DeleteRoute(row.id)
    showMessage("success", 'Ë∑ØÁî±Â∑≤Âà†Èô§')
    loadRoutes()
    loadStats()
  } catch (error) {
    showMessage("error", 'Âà†Èô§Â§±Ë¥•: ' + error)
  }
}

const fetchModels = async () => {
  if (!formModel.value.apiUrl) {
    showMessage("warning", 'ËØ∑ÂÖàËæìÂÖ• API URL')
    return
  }

  // Ê£ÄÊü• Wails ËøêË°åÊó∂
  if (!window.go || !window.go.main || !window.go.main.App) {
    showMessage("error", 'Wails ËøêË°åÊó∂Êú™Â∞±Áª™ÔºåËØ∑‰ΩøÁî®ÁºñËØëÂêéÁöÑ exe Êàñ wails dev')
    return
  }

  fetchingModels.value = true
  try {
    const models = await window.go.main.App.FetchRemoteModels(
      formModel.value.apiUrl,
      formModel.value.apiKey || ''
    )
    fetchedModels.value = models
    showModelSelectModal.value = true
  } catch (error) {
    showMessage("error", 'Ëé∑ÂèñÊ®°ÂûãÂàóË°®Â§±Ë¥•: ' + error)
  } finally {
    fetchingModels.value = false
  }
}

const selectModel = (model) => {
  formModel.value.model = model
  showModelSelectModal.value = false
  modelSearchKeyword.value = '' // Ê∏ÖÁ©∫ÊêúÁ¥¢
  showMessage("success", 'Â∑≤ÈÄâÊã©Ê®°Âûã: ' + model)
}

// Ê†πÊçÆÊ®°ÂûãÂêçÁß∞ËØÜÂà´Êèê‰æõÂïÜ
const getModelProvider = (model) => {
  const lowerModel = model.toLowerCase()
  if (lowerModel.includes('gpt') || lowerModel.includes('openai')) return 'OpenAI'
  if (lowerModel.includes('claude')) return 'Anthropic'
  if (lowerModel.includes('gemini')) return 'Google'
  if (lowerModel.includes('deepseek')) return 'DeepSeek'
  if (lowerModel.includes('glm') || lowerModel.includes('chatglm')) return 'Êô∫Ë∞±AI'
  if (lowerModel.includes('qwen') || lowerModel.includes('ÈÄö‰πâ')) return 'ÈòøÈáå‰∫ë'
  if (lowerModel.includes('ernie') || lowerModel.includes('ÊñáÂøÉ')) return 'ÁôæÂ∫¶'
  if (lowerModel.includes('spark') || lowerModel.includes('ËÆØÈ£û')) return 'ËÆØÈ£û'
  if (lowerModel.includes('llama')) return 'Meta'
  if (lowerModel.includes('mistral')) return 'Mistral'
  return 'ÂÖ∂‰ªñ'
}

// Ê†πÊçÆÊèê‰æõÂïÜËøîÂõûÊ†áÁ≠æÈ¢úËâ≤
const getModelTagType = (model) => {
  const provider = getModelProvider(model)
  const typeMap = {
    'OpenAI': 'success',
    'Anthropic': 'info',
    'Google': 'warning',
    'DeepSeek': 'error',
    'Êô∫Ë∞±AI': 'primary',
    'ÈòøÈáå‰∫ë': 'default',
    'ÁôæÂ∫¶': 'info',
    'ËÆØÈ£û': 'success',
    'Meta': 'warning',
    'Mistral': 'error'
  }
  return typeMap[provider] || 'default'
}

const maskApiKey = (key) => {
  if (!key || key.length <= 10) return key
  return key.substring(0, 5) + '***' + key.substring(key.length - 5)
}

const copyToClipboard = async (text) => {
  try {
    await navigator.clipboard.writeText(text)
    showMessage("success", 'Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø')
  } catch (error) {
    showMessage("error", 'Â§çÂà∂Â§±Ë¥•')
  }
}

const formatNumber = (num) => {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M'
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'K'
  }
  return num.toString()
}

// Lifecycle
onMounted(async () => {
  // Wait for Wails runtime to be ready
  if (!window.go) {
    console.log('Waiting for Wails runtime...')
    await new Promise((resolve) => {
      const checkRuntime = setInterval(() => {
        if (window.go) {
          clearInterval(checkRuntime)
          resolve()
        }
      }, 100)
    })
  }

  console.log('Wails runtime ready, loading data...')
  loadRoutes()
  loadStats()
  loadConfig()

  // ÊØè 30 ÁßíÂà∑Êñ∞‰∏ÄÊ¨°ÁªüËÆ°
  setInterval(loadStats, 30000)
})
</script>

<style scoped>
:deep(.n-card__content) {
  padding: 16px;
}

:deep(.n-statistic) {
  color: white;
}

:deep(.n-statistic .n-statistic__label) {
  color: rgba(255, 255, 255, 0.9);
  font-size: 14px;
}

:deep(.n-statistic .n-statistic__value) {
  color: white;
  font-size: 28px;
  font-weight: 600;
}

.selected-model-card {
  border: 2px solid #18a058 !important;
  box-shadow: 0 0 10px rgba(24, 160, 88, 0.3) !important;
}

.selected-model-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(24, 160, 88, 0.4) !important;
}
</style>
